from tkinter import messagebox
from tkinter import *
import csv


def login():
    username = entry_username.get()
    password = entry_password.get()

    with open('users.csv', 'r') as file:
        reader = csv.reader(file)
        for row in reader:
            if row[0] == username and row[1] == password:
                if username == "admin":
                    messagebox.showinfo("–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏!", "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, " + username + "!")
                    open_admin_window()
                else:
                    messagebox.showinfo("–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏!", "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, " + username + "!")
                    open_notes_window(username)
                return
    messagebox.showerror("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞üòß", "–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å")


def register():
    username = entry_username.get()
    password = entry_password.get()

    with open('users.csv', 'a', newline='') as file:
        writer = csv.writer(file)
        writer.writerow([username, password])

    messagebox.showinfo("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!", "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω")


def open_notes_window(username):
    root.destroy()
    notes_window = Tk()
    notes_window.title("–ó–∞–º–µ—Ç–∫–∏ - " + username)

    def save_notes():
        notes = entry_notes.get("1.0", END)
        with open(username + "_notes.txt", 'a') as file:
            file.write(notes + "\n\n")
        messagebox.showinfo("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫", "–ó–∞–º–µ—Ç–∫–∏ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")

    def load_notes():
        try:
            with open(username + "_notes.txt", 'r') as file:
                notes = file.read()
                entry_notes.insert(END, notes)
        except FileNotFoundError:
            messagebox.showinfo("–ó–∞–º–µ—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ", "–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")

    label_notes = Label(notes_window, text="–ó–∞–º–µ—Ç–∫–∏:")
    label_notes.pack()

    entry_notes = Text(notes_window)
    entry_notes.pack()

    button_save = Button(notes_window, text="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫—É", command=save_notes)
    button_save.pack()
#–∫–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –∫–∞–∂–¥–∞—è –∑–∞–º–µ—Ç–∫–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ 2 —Å—Ç—Ä–æ–∫–∏ –Ω–∏–∂–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π)
    button_load = Button(notes_window, text="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏", command=load_notes)
    button_load.pack()

    notes_window.mainloop()

#—á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç –∞–¥–º–∏–Ω–∞, –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –Ω–∏–∫ admin –∏ –ø–∞—Ä–æ–ª—å 163 üòÅ
def open_admin_window():
    root.destroy()
    admin_window = Tk()
    admin_window.title("–ê–¥–º–∏–Ω")

    def view_notes():
        username = entry_username.get()
        try:
            with open(username + "_notes.txt", 'r') as file:
                notes = file.read()
                messagebox.showinfo("–ó–∞–º–µ—Ç–∫–∏ " + username, notes)
        except FileNotFoundError:
            messagebox.showinfo("–ó–∞–º–µ—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ", "–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")

    label_username = Label(admin_window, text="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:")
    label_username.pack()

    entry_username = Entry(admin_window)
    entry_username.pack()

    button_view_notes = Button(admin_window, text="–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–º–µ—Ç–∫–∏", command=view_notes)
    button_view_notes.pack()

    admin_window.mainloop()


# —Å–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
root = Tk()
root.title("–ó–∞–º–µ—Ç–∫–∏")

# –º–µ—Ç–∫–∏ –∏ –ø–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞
label_username = Label(root, text="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:")
label_username.pack()
entry_username = Entry(root)
entry_username.pack()

label_password = Label(root, text="–ü–∞—Ä–æ–ª—å:")
label_password.pack()
entry_password = Entry(root, show="*")
entry_password.pack()

# –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
button_login = Button(root, text="–í–æ–π—Ç–∏", command=login)
button_login.pack()

button_register = Button(root, text="–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è", command=register)
button_register.pack()



root.mainloop()
